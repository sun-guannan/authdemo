{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.additionalSignUpFields = additionalSignUpFields;\nexports.authWithUsername = authWithUsername;\nexports.availableScreens = availableScreens;\nexports.databaseConnection = databaseConnection;\nexports.databaseConnectionName = databaseConnectionName;\nexports.databaseConnectionRequiresUsername = databaseConnectionRequiresUsername;\nexports.databaseLogInWithEmail = databaseLogInWithEmail;\nexports.databaseUsernameStyle = databaseUsernameStyle;\nexports.databaseUsernameValue = databaseUsernameValue;\nexports.defaultDatabaseConnection = defaultDatabaseConnection;\nexports.defaultDatabaseConnectionName = defaultDatabaseConnectionName;\nexports.forgotPasswordLink = forgotPasswordLink;\nexports.getInitialScreen = getInitialScreen;\nexports.getScreen = getScreen;\nexports.hasInitialScreen = hasInitialScreen;\nexports.hasScreen = hasScreen;\nexports.initDatabase = initDatabase;\nexports.mustAcceptTerms = mustAcceptTerms;\nexports.overrideDatabaseOptions = overrideDatabaseOptions;\nexports.passwordStrengthPolicy = passwordStrengthPolicy;\nexports.resolveAdditionalSignUpFields = resolveAdditionalSignUpFields;\nexports.setScreen = setScreen;\nexports.shouldAutoLogin = shouldAutoLogin;\nexports.showTerms = showTerms;\nexports.signUpFieldsStrictValidation = signUpFieldsStrictValidation;\nexports.signUpHideUsernameField = signUpHideUsernameField;\nexports.signUpLink = signUpLink;\nexports.termsAccepted = termsAccepted;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nvar _immutable = _interopRequireWildcard(require(\"immutable\"));\nvar l = _interopRequireWildcard(require(\"../../core/index\"));\nvar _index2 = require(\"../../field/index\");\nvar _data_utils = require(\"../../utils/data_utils\");\nvar _sync = _interopRequireDefault(require(\"../../sync\"));\nvar _trim = _interopRequireDefault(require(\"trim\"));\nvar _tenant = require(\"../../core/tenant\");\nvar _enterprise = require(\"../../connection/enterprise\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(e) {\n  if (\"function\" != typeof WeakMap) return null;\n  var r = new WeakMap(),\n    t = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n    return e ? t : r;\n  })(e);\n}\nfunction _interopRequireWildcard(e, r) {\n  if (!r && e && e.__esModule) return e;\n  if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return {\n    default: e\n  };\n  var t = _getRequireWildcardCache(r);\n  if (t && t.has(e)) return t.get(e);\n  var n = {\n      __proto__: null\n    },\n    a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) {\n    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n  }\n  return n.default = e, t && t.set(e, n), n;\n}\nvar _dataFns = (0, _data_utils.dataFns)(['database']),\n  get = _dataFns.get,\n  initNS = _dataFns.initNS,\n  tget = _dataFns.tget,\n  tset = _dataFns.tset;\nfunction initDatabase(m, options) {\n  m = initNS(m, _immutable.default.fromJS(processDatabaseOptions(options)));\n  m = resolveAdditionalSignUpFields(m);\n  return m;\n}\nfunction assertMaybeBoolean(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'boolean';\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not a boolean.\"));\n  return valid;\n}\nfunction assertMaybeEnum(opts, name, a) {\n  var valid = opts[name] === undefined || a.indexOf(opts[name]) > -1;\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not one of the following allowed values: \").concat(a.map(function (x) {\n    return JSON.stringify(x);\n  }).join(', '), \".\"));\n  return valid;\n}\nfunction assertMaybeString(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'string' && (0, _trim.default)(opts[name]).length > 0;\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not a non-empty string.\"));\n  return valid;\n}\nfunction assertMaybeArray(opts, name) {\n  var valid = opts[name] === undefined || window.Array.isArray(opts[name]);\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not an array.\"));\n  return valid;\n}\nfunction processDatabaseOptions(opts) {\n  var additionalSignUpFields = opts.additionalSignUpFields,\n    defaultDatabaseConnection = opts.defaultDatabaseConnection,\n    forgotPasswordLink = opts.forgotPasswordLink,\n    loginAfterSignUp = opts.loginAfterSignUp,\n    mustAcceptTerms = opts.mustAcceptTerms,\n    showTerms = opts.showTerms,\n    signUpLink = opts.signUpLink,\n    usernameStyle = opts.usernameStyle,\n    signUpFieldsStrictValidation = opts.signUpFieldsStrictValidation,\n    signUpHideUsernameField = opts.signUpHideUsernameField;\n  var _processScreenOptions = processScreenOptions(opts),\n    initialScreen = _processScreenOptions.initialScreen,\n    screens = _processScreenOptions.screens;\n  if (!assertMaybeEnum(opts, 'usernameStyle', ['email', 'username'])) {\n    usernameStyle = undefined;\n  }\n  if (!assertMaybeString(opts, 'defaultDatabaseConnection')) {\n    defaultDatabaseConnection = undefined;\n  }\n  if (!assertMaybeString(opts, 'forgotPasswordLink')) {\n    forgotPasswordLink = undefined;\n  }\n  if (!assertMaybeString(opts, 'signUpLink')) {\n    signUpLink = undefined;\n  }\n  if (!assertMaybeBoolean(opts, 'mustAcceptTerms')) {\n    mustAcceptTerms = undefined;\n  }\n  if (!assertMaybeBoolean(opts, 'showTerms')) {\n    showTerms = true;\n  }\n  if (!assertMaybeBoolean(opts, 'signUpFieldsStrictValidation')) {\n    signUpFieldsStrictValidation = false;\n  }\n  if (!assertMaybeBoolean(opts, 'signUpHideUsernameField')) {\n    signUpHideUsernameField = false;\n  }\n  if (!assertMaybeArray(opts, 'additionalSignUpFields')) {\n    additionalSignUpFields = undefined;\n  } else if (additionalSignUpFields) {\n    additionalSignUpFields = additionalSignUpFields.reduce(function (r, x) {\n      var icon = x.icon,\n        name = x.name,\n        options = x.options,\n        placeholder = x.placeholder,\n        placeholderHTML = x.placeholderHTML,\n        prefill = x.prefill,\n        type = x.type,\n        validator = x.validator,\n        value = x.value,\n        storage = x.storage;\n      var filter = true;\n      var reservedNames = ['email', 'username', 'password'];\n      if (typeof name != 'string' || !name.match(/^[a-zA-Z0-9_]+$/) || reservedNames.indexOf(name) > -1) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` because it does not contain valid `name` property. Every element of `additionalSignUpFields` must be an object with a `name` property that is a non-empty string consisting of letters, numbers and underscores. The following names are reserved, and therefore, cannot be used: \".concat(reservedNames.join(', '), \".\"));\n        filter = false;\n      }\n      if (type !== 'hidden' && (typeof placeholder != 'string' || !placeholder) && (typeof placeholderHTML != 'string' || !placeholderHTML)) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` (\".concat(name, \") because it does not contain a valid `placeholder` or `placeholderHTML` property. Every element of `additionalSignUpFields` must have a `placeholder` or `placeholderHTML` property that is a non-empty string.\"));\n        filter = false;\n      }\n      if (placeholderHTML && placeholder) {\n        l.warn(opts, 'When provided, the `placeholderHTML` property of an element of `additionalSignUpFields` will override the `placeholder` property of that element');\n      }\n      if (icon != undefined && (typeof icon != 'string' || !icon)) {\n        l.warn(opts, 'When provided, the `icon` property of an element of `additionalSignUpFields` must be a non-empty string.');\n        icon = undefined;\n      }\n      if (prefill != undefined && (typeof prefill != 'string' || !prefill) && typeof prefill != 'function') {\n        l.warn(opts, 'When provided, the `prefill` property of an element of `additionalSignUpFields` must be a non-empty string or a function.');\n        prefill = undefined;\n      }\n      var types = ['select', 'text', 'checkbox', 'hidden'];\n      if (type != undefined && (typeof type != 'string' || types.indexOf(type) === -1)) {\n        l.warn(opts, \"When provided, the `type` property of an element of `additionalSignUpFields` must be one of the following strings: \\\"\".concat(types.join('\", \"'), \"\\\".\"));\n        type = undefined;\n      }\n      if (validator != undefined && type === 'select') {\n        l.warn(opts, 'Elements of `additionalSignUpFields` with a \"select\" `type` cannot specify a `validator` function, all of its `options` are assumed to be valid.');\n        validator = undefined;\n      }\n      if (validator != undefined && typeof validator != 'function') {\n        l.warn(opts, 'When provided, the `validator` property of an element of `additionalSignUpFields` must be a function.');\n        validator = undefined;\n      }\n      if (options != undefined && type != 'select') {\n        l.warn(opts, 'The `options` property can only by provided for an element of `additionalSignUpFields` when its `type` equals to \"select\"');\n        options = undefined;\n      }\n      if (options != undefined && !window.Array.isArray(options) && typeof options != 'function' || type === 'select' && options === undefined) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` (\".concat(name, \") because it has a \\\"select\\\" `type` but does not specify an `options` property that is an Array or a function.\"));\n        filter = false;\n      }\n      if (type === 'hidden' && !value) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` (\".concat(name, \") because it has a \\\"hidden\\\" `type` but does not specify a `value` string.\"));\n        filter = false;\n      }\n      return filter ? r.concat([{\n        icon: icon,\n        name: name,\n        options: options,\n        placeholder: placeholder,\n        placeholderHTML: placeholderHTML,\n        prefill: prefill,\n        type: type,\n        validator: validator,\n        value: value,\n        storage: storage\n      }]) : r;\n    }, []);\n    additionalSignUpFields = _immutable.default.fromJS(additionalSignUpFields).map(function (x) {\n      return x.filter(function (y) {\n        return y !== undefined;\n      });\n    });\n  }\n\n  // TODO: add a warning if it is not a boolean, leave it undefined,\n  // and change accessor fn.\n  loginAfterSignUp = loginAfterSignUp === false ? false : true;\n  return (0, _immutable.Map)({\n    additionalSignUpFields: additionalSignUpFields,\n    defaultConnectionName: defaultDatabaseConnection,\n    forgotPasswordLink: forgotPasswordLink,\n    initialScreen: initialScreen,\n    loginAfterSignUp: loginAfterSignUp,\n    mustAcceptTerms: mustAcceptTerms,\n    showTerms: showTerms,\n    screens: screens,\n    signUpLink: signUpLink,\n    usernameStyle: usernameStyle,\n    signUpFieldsStrictValidation: signUpFieldsStrictValidation,\n    signUpHideUsernameField: signUpHideUsernameField\n  }).filter(function (x) {\n    return typeof x !== 'undefined';\n  }).toJS();\n}\nfunction processScreenOptions(opts) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    allowLogin: true,\n    allowSignUp: true,\n    allowForgotPassword: true,\n    initialScreen: undefined\n  };\n  var allowForgotPassword = opts.allowForgotPassword,\n    allowLogin = opts.allowLogin,\n    allowSignUp = opts.allowSignUp,\n    initialScreen = opts.initialScreen;\n  var screens = [];\n  if (allowLogin === true || !assertMaybeBoolean(opts, 'allowLogin') && defaults.allowLogin || allowLogin === undefined && defaults.allowLogin) {\n    screens.push('login');\n  }\n  if (allowSignUp === true || !assertMaybeBoolean(opts, 'allowSignUp') && defaults.allowSignUp || allowSignUp === undefined && defaults.allowSignUp) {\n    screens.push('signUp');\n  }\n  if (allowForgotPassword === true || !assertMaybeBoolean(opts, 'allowForgotPassword') && defaults.allowForgotPassword || allowForgotPassword === undefined && defaults.allowForgotPassword) {\n    screens.push('forgotPassword');\n  }\n  screens.push('mfaLogin');\n  if (!assertMaybeEnum(opts, 'initialScreen', screens)) {\n    initialScreen = undefined;\n  }\n  if (initialScreen === undefined) {\n    initialScreen = defaults.initialScreen || screens[0];\n  }\n  return {\n    initialScreen: initialScreen,\n    screens: new _immutable.List(screens)\n  };\n}\nfunction overrideDatabaseOptions(m, opts) {\n  var _processScreenOptions2 = processScreenOptions(opts, {\n      allowLogin: availableScreens(m).contains('login'),\n      allowSignUp: availableScreens(m).contains('signUp'),\n      allowForgotPassword: availableScreens(m).contains('forgotPassword'),\n      initialScreen: get(m, 'initialScreen')\n    }),\n    initialScreen = _processScreenOptions2.initialScreen,\n    screens = _processScreenOptions2.screens;\n  m = tset(m, 'initialScreen', initialScreen);\n  m = tset(m, 'screens', screens);\n  return m;\n}\nfunction defaultDatabaseConnection(m) {\n  var name = defaultDatabaseConnectionName(m);\n  return name && l.findConnection(m, name);\n}\nfunction defaultDatabaseConnectionName(m) {\n  return get(m, 'defaultConnectionName');\n}\nfunction databaseConnection(m) {\n  return l.resolvedConnection(m) || (0, _tenant.defaultDirectory)(m) || defaultDatabaseConnection(m) || l.connection(m, 'database');\n}\nfunction databaseConnectionName(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('name');\n}\nfunction forgotPasswordLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'forgotPasswordLink', notFound);\n}\nfunction signUpLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'signUpLink', notFound);\n}\nfunction setScreen(m, name) {\n  var fields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  // TODO: the lock/index module should provide a way to clear\n  // everything that needs the be cleared when changing screens, other\n  // modules should not care.\n  m = l.clearGlobalError(m);\n  m = l.clearGlobalSuccess(m);\n  m = (0, _index2.hideInvalidFields)(m, fields);\n  m = (0, _index2.clearFields)(m, fields);\n  return tset(m, 'screen', name);\n}\nfunction getScreen(m) {\n  var screen = tget(m, 'screen');\n  var initialScreen = getInitialScreen(m);\n  var screens = [screen, initialScreen, 'login', 'signUp', 'forgotPassword', 'mfaLogin'];\n  var availableScreens = screens.filter(function (x) {\n    return hasScreen(m, x);\n  });\n  return availableScreens[0];\n}\nfunction availableScreens(m) {\n  return tget(m, 'screens') || get(m, 'screens', new _immutable.List());\n}\nfunction getInitialScreen(m) {\n  return tget(m, 'initialScreen') || get(m, 'initialScreen');\n}\nfunction hasInitialScreen(m, str) {\n  return getInitialScreen(m) === str;\n}\nfunction databaseConnectionRequiresUsername(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).toJS().requireUsername;\n}\nfunction databaseUsernameStyle(m) {\n  if (l.hasSomeConnections(m, 'database')) {\n    if (l.connectionResolver(m)) {\n      return 'username';\n    }\n    return databaseConnectionRequiresUsername(m) ? get(m, 'usernameStyle', 'any') : 'email';\n  }\n  return l.hasSomeConnections(m, 'enterprise') && (0, _enterprise.findADConnectionWithoutDomain)(m) ? 'username' : 'email';\n}\nfunction databaseLogInWithEmail(m) {\n  return databaseUsernameStyle(m) === 'email';\n}\nfunction databaseUsernameValue(m) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isEmailOnly = databaseLogInWithEmail(m);\n  if (isEmailOnly) {\n    return (0, _index2.getFieldValue)(m, 'email');\n  }\n  if (options.emailFirst) {\n    return (0, _index2.getFieldValue)(m, 'email') || (0, _index2.getFieldValue)(m, 'username');\n  }\n  return (0, _index2.getFieldValue)(m, 'username') || (0, _index2.getFieldValue)(m, 'email');\n}\nfunction authWithUsername(m) {\n  return databaseConnectionRequiresUsername(m) || get(m, 'usernameStyle', 'email') === 'username';\n}\nfunction hasScreen(m, s) {\n  var _toJS = (databaseConnection(m) || (0, _immutable.Map)()).toJS(),\n    allowForgot = _toJS.allowForgot,\n    allowSignup = _toJS.allowSignup;\n  return !(allowForgot === false && s === 'forgotPassword') && !(allowSignup === false && s === 'signUp') && availableScreens(m).contains(s);\n}\nfunction shouldAutoLogin(m) {\n  return get(m, 'loginAfterSignUp');\n}\nfunction passwordStrengthPolicy(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('passwordPolicy', 'none');\n}\nfunction additionalSignUpFields(m) {\n  return get(m, 'additionalSignUpFields', (0, _immutable.List)());\n}\nfunction showTerms(m) {\n  return get(m, 'showTerms', true);\n}\nfunction signUpFieldsStrictValidation(m) {\n  return get(m, 'signUpFieldsStrictValidation', false);\n}\nfunction signUpHideUsernameField(m) {\n  return get(m, 'signUpHideUsernameField', false);\n}\nfunction mustAcceptTerms(m) {\n  return get(m, 'mustAcceptTerms', false);\n}\nfunction termsAccepted(m) {\n  return !mustAcceptTerms(m) || tget(m, 'termsAccepted', false);\n}\nfunction toggleTermsAcceptance(m) {\n  return tset(m, 'termsAccepted', !termsAccepted(m));\n}\nfunction resolveAdditionalSignUpFields(m) {\n  return additionalSignUpFields(m).reduce(function (r, x) {\n    switch (x.get('type')) {\n      case 'select':\n        return resolveAdditionalSignUpSelectField(r, x);\n      case 'hidden':\n        return resolveAdditionalSignUpHiddenField(r, x);\n      default:\n        return resolveAdditionalSignUpTextField(r, x);\n    }\n  }, m);\n}\nfunction resolveAdditionalSignUpSelectField(m, x) {\n  var name = x.get('name');\n  var keyNs = ['additionalSignUpField', name];\n  var prefill = x.get('prefill');\n  var options = x.get('options');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  var resolvedOptions = typeof options === 'function' ? undefined : options;\n  var register = function register(m) {\n    return resolvedPrefill !== undefined && resolvedOptions !== undefined ? (0, _index2.registerOptionField)(m, name, _immutable.default.fromJS(resolvedOptions), resolvedPrefill) : m;\n  };\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync.default)(m, keyNs.concat('prefill'), {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        resolvedPrefill = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  }\n  if (resolvedOptions === undefined) {\n    m = (0, _sync.default)(m, keyNs.concat('options'), {\n      successFn: function successFn(m, result) {\n        resolvedOptions = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return options(cb);\n      }\n    });\n  }\n  if (resolvedPrefill !== undefined && resolvedOptions !== undefined) {\n    m = (0, _index2.registerOptionField)(m, name, _immutable.default.fromJS(resolvedOptions), resolvedPrefill);\n  }\n  return m;\n}\nfunction resolveAdditionalSignUpTextField(m, x) {\n  var name = x.get('name');\n  var key = ['additionalSignUpField', name, 'prefill'];\n  var prefill = x.get('prefill');\n  var validator = x.get('validator');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync.default)(m, key, {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        return (0, _index2.setField)(m, name, result, validator);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  } else {\n    m = (0, _index2.setField)(m, name, resolvedPrefill, validator);\n  }\n  return m;\n}\nfunction resolveAdditionalSignUpHiddenField(m, x) {\n  return (0, _index2.setField)(m, x.get('name'), x.get('value'));\n}","map":{"version":3,"names":["_typeof","o","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","additionalSignUpFields","authWithUsername","availableScreens","databaseConnection","databaseConnectionName","databaseConnectionRequiresUsername","databaseLogInWithEmail","databaseUsernameStyle","databaseUsernameValue","defaultDatabaseConnection","defaultDatabaseConnectionName","forgotPasswordLink","getInitialScreen","getScreen","hasInitialScreen","hasScreen","initDatabase","mustAcceptTerms","overrideDatabaseOptions","passwordStrengthPolicy","resolveAdditionalSignUpFields","setScreen","shouldAutoLogin","showTerms","signUpFieldsStrictValidation","signUpHideUsernameField","signUpLink","termsAccepted","toggleTermsAcceptance","_immutable","_interopRequireWildcard","require","l","_index2","_data_utils","_sync","_interopRequireDefault","_trim","_tenant","_enterprise","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_dataFns","dataFns","initNS","tget","tset","m","options","fromJS","processDatabaseOptions","assertMaybeBoolean","opts","name","valid","undefined","warn","concat","assertMaybeEnum","indexOf","map","x","JSON","stringify","join","assertMaybeString","length","assertMaybeArray","window","Array","isArray","loginAfterSignUp","usernameStyle","_processScreenOptions","processScreenOptions","initialScreen","screens","reduce","icon","placeholder","placeholderHTML","prefill","type","validator","storage","filter","reservedNames","match","types","y","Map","defaultConnectionName","toJS","defaults","arguments","allowLogin","allowSignUp","allowForgotPassword","push","List","_processScreenOptions2","contains","findConnection","resolvedConnection","defaultDirectory","connection","notFound","fields","clearGlobalError","clearGlobalSuccess","hideInvalidFields","clearFields","screen","str","requireUsername","hasSomeConnections","connectionResolver","findADConnectionWithoutDomain","isEmailOnly","getFieldValue","emailFirst","s","_toJS","allowForgot","allowSignup","resolveAdditionalSignUpSelectField","resolveAdditionalSignUpHiddenField","resolveAdditionalSignUpTextField","keyNs","resolvedPrefill","resolvedOptions","register","registerOptionField","recoverResult","successFn","result","syncFn","cb","key","setField"],"sources":["/Users/sunguannan/VisualStudioProjects/authdemo/node_modules/auth0-lock/lib/connection/database/index.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.additionalSignUpFields = additionalSignUpFields;\nexports.authWithUsername = authWithUsername;\nexports.availableScreens = availableScreens;\nexports.databaseConnection = databaseConnection;\nexports.databaseConnectionName = databaseConnectionName;\nexports.databaseConnectionRequiresUsername = databaseConnectionRequiresUsername;\nexports.databaseLogInWithEmail = databaseLogInWithEmail;\nexports.databaseUsernameStyle = databaseUsernameStyle;\nexports.databaseUsernameValue = databaseUsernameValue;\nexports.defaultDatabaseConnection = defaultDatabaseConnection;\nexports.defaultDatabaseConnectionName = defaultDatabaseConnectionName;\nexports.forgotPasswordLink = forgotPasswordLink;\nexports.getInitialScreen = getInitialScreen;\nexports.getScreen = getScreen;\nexports.hasInitialScreen = hasInitialScreen;\nexports.hasScreen = hasScreen;\nexports.initDatabase = initDatabase;\nexports.mustAcceptTerms = mustAcceptTerms;\nexports.overrideDatabaseOptions = overrideDatabaseOptions;\nexports.passwordStrengthPolicy = passwordStrengthPolicy;\nexports.resolveAdditionalSignUpFields = resolveAdditionalSignUpFields;\nexports.setScreen = setScreen;\nexports.shouldAutoLogin = shouldAutoLogin;\nexports.showTerms = showTerms;\nexports.signUpFieldsStrictValidation = signUpFieldsStrictValidation;\nexports.signUpHideUsernameField = signUpHideUsernameField;\nexports.signUpLink = signUpLink;\nexports.termsAccepted = termsAccepted;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nvar _immutable = _interopRequireWildcard(require(\"immutable\"));\nvar l = _interopRequireWildcard(require(\"../../core/index\"));\nvar _index2 = require(\"../../field/index\");\nvar _data_utils = require(\"../../utils/data_utils\");\nvar _sync = _interopRequireDefault(require(\"../../sync\"));\nvar _trim = _interopRequireDefault(require(\"trim\"));\nvar _tenant = require(\"../../core/tenant\");\nvar _enterprise = require(\"../../connection/enterprise\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nvar _dataFns = (0, _data_utils.dataFns)(['database']),\n  get = _dataFns.get,\n  initNS = _dataFns.initNS,\n  tget = _dataFns.tget,\n  tset = _dataFns.tset;\nfunction initDatabase(m, options) {\n  m = initNS(m, _immutable.default.fromJS(processDatabaseOptions(options)));\n  m = resolveAdditionalSignUpFields(m);\n  return m;\n}\nfunction assertMaybeBoolean(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'boolean';\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not a boolean.\"));\n  return valid;\n}\nfunction assertMaybeEnum(opts, name, a) {\n  var valid = opts[name] === undefined || a.indexOf(opts[name]) > -1;\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not one of the following allowed values: \").concat(a.map(function (x) {\n    return JSON.stringify(x);\n  }).join(', '), \".\"));\n  return valid;\n}\nfunction assertMaybeString(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'string' && (0, _trim.default)(opts[name]).length > 0;\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not a non-empty string.\"));\n  return valid;\n}\nfunction assertMaybeArray(opts, name) {\n  var valid = opts[name] === undefined || window.Array.isArray(opts[name]);\n  if (!valid) l.warn(opts, \"The `\".concat(name, \"` option will be ignored, because it is not an array.\"));\n  return valid;\n}\nfunction processDatabaseOptions(opts) {\n  var additionalSignUpFields = opts.additionalSignUpFields,\n    defaultDatabaseConnection = opts.defaultDatabaseConnection,\n    forgotPasswordLink = opts.forgotPasswordLink,\n    loginAfterSignUp = opts.loginAfterSignUp,\n    mustAcceptTerms = opts.mustAcceptTerms,\n    showTerms = opts.showTerms,\n    signUpLink = opts.signUpLink,\n    usernameStyle = opts.usernameStyle,\n    signUpFieldsStrictValidation = opts.signUpFieldsStrictValidation,\n    signUpHideUsernameField = opts.signUpHideUsernameField;\n  var _processScreenOptions = processScreenOptions(opts),\n    initialScreen = _processScreenOptions.initialScreen,\n    screens = _processScreenOptions.screens;\n  if (!assertMaybeEnum(opts, 'usernameStyle', ['email', 'username'])) {\n    usernameStyle = undefined;\n  }\n  if (!assertMaybeString(opts, 'defaultDatabaseConnection')) {\n    defaultDatabaseConnection = undefined;\n  }\n  if (!assertMaybeString(opts, 'forgotPasswordLink')) {\n    forgotPasswordLink = undefined;\n  }\n  if (!assertMaybeString(opts, 'signUpLink')) {\n    signUpLink = undefined;\n  }\n  if (!assertMaybeBoolean(opts, 'mustAcceptTerms')) {\n    mustAcceptTerms = undefined;\n  }\n  if (!assertMaybeBoolean(opts, 'showTerms')) {\n    showTerms = true;\n  }\n  if (!assertMaybeBoolean(opts, 'signUpFieldsStrictValidation')) {\n    signUpFieldsStrictValidation = false;\n  }\n  if (!assertMaybeBoolean(opts, 'signUpHideUsernameField')) {\n    signUpHideUsernameField = false;\n  }\n  if (!assertMaybeArray(opts, 'additionalSignUpFields')) {\n    additionalSignUpFields = undefined;\n  } else if (additionalSignUpFields) {\n    additionalSignUpFields = additionalSignUpFields.reduce(function (r, x) {\n      var icon = x.icon,\n        name = x.name,\n        options = x.options,\n        placeholder = x.placeholder,\n        placeholderHTML = x.placeholderHTML,\n        prefill = x.prefill,\n        type = x.type,\n        validator = x.validator,\n        value = x.value,\n        storage = x.storage;\n      var filter = true;\n      var reservedNames = ['email', 'username', 'password'];\n      if (typeof name != 'string' || !name.match(/^[a-zA-Z0-9_]+$/) || reservedNames.indexOf(name) > -1) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` because it does not contain valid `name` property. Every element of `additionalSignUpFields` must be an object with a `name` property that is a non-empty string consisting of letters, numbers and underscores. The following names are reserved, and therefore, cannot be used: \".concat(reservedNames.join(', '), \".\"));\n        filter = false;\n      }\n      if (type !== 'hidden' && (typeof placeholder != 'string' || !placeholder) && (typeof placeholderHTML != 'string' || !placeholderHTML)) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` (\".concat(name, \") because it does not contain a valid `placeholder` or `placeholderHTML` property. Every element of `additionalSignUpFields` must have a `placeholder` or `placeholderHTML` property that is a non-empty string.\"));\n        filter = false;\n      }\n      if (placeholderHTML && placeholder) {\n        l.warn(opts, 'When provided, the `placeholderHTML` property of an element of `additionalSignUpFields` will override the `placeholder` property of that element');\n      }\n      if (icon != undefined && (typeof icon != 'string' || !icon)) {\n        l.warn(opts, 'When provided, the `icon` property of an element of `additionalSignUpFields` must be a non-empty string.');\n        icon = undefined;\n      }\n      if (prefill != undefined && (typeof prefill != 'string' || !prefill) && typeof prefill != 'function') {\n        l.warn(opts, 'When provided, the `prefill` property of an element of `additionalSignUpFields` must be a non-empty string or a function.');\n        prefill = undefined;\n      }\n      var types = ['select', 'text', 'checkbox', 'hidden'];\n      if (type != undefined && (typeof type != 'string' || types.indexOf(type) === -1)) {\n        l.warn(opts, \"When provided, the `type` property of an element of `additionalSignUpFields` must be one of the following strings: \\\"\".concat(types.join('\", \"'), \"\\\".\"));\n        type = undefined;\n      }\n      if (validator != undefined && type === 'select') {\n        l.warn(opts, 'Elements of `additionalSignUpFields` with a \"select\" `type` cannot specify a `validator` function, all of its `options` are assumed to be valid.');\n        validator = undefined;\n      }\n      if (validator != undefined && typeof validator != 'function') {\n        l.warn(opts, 'When provided, the `validator` property of an element of `additionalSignUpFields` must be a function.');\n        validator = undefined;\n      }\n      if (options != undefined && type != 'select') {\n        l.warn(opts, 'The `options` property can only by provided for an element of `additionalSignUpFields` when its `type` equals to \"select\"');\n        options = undefined;\n      }\n      if (options != undefined && !window.Array.isArray(options) && typeof options != 'function' || type === 'select' && options === undefined) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` (\".concat(name, \") because it has a \\\"select\\\" `type` but does not specify an `options` property that is an Array or a function.\"));\n        filter = false;\n      }\n      if (type === 'hidden' && !value) {\n        l.warn(opts, \"Ignoring an element of `additionalSignUpFields` (\".concat(name, \") because it has a \\\"hidden\\\" `type` but does not specify a `value` string.\"));\n        filter = false;\n      }\n      return filter ? r.concat([{\n        icon: icon,\n        name: name,\n        options: options,\n        placeholder: placeholder,\n        placeholderHTML: placeholderHTML,\n        prefill: prefill,\n        type: type,\n        validator: validator,\n        value: value,\n        storage: storage\n      }]) : r;\n    }, []);\n    additionalSignUpFields = _immutable.default.fromJS(additionalSignUpFields).map(function (x) {\n      return x.filter(function (y) {\n        return y !== undefined;\n      });\n    });\n  }\n\n  // TODO: add a warning if it is not a boolean, leave it undefined,\n  // and change accessor fn.\n  loginAfterSignUp = loginAfterSignUp === false ? false : true;\n  return (0, _immutable.Map)({\n    additionalSignUpFields: additionalSignUpFields,\n    defaultConnectionName: defaultDatabaseConnection,\n    forgotPasswordLink: forgotPasswordLink,\n    initialScreen: initialScreen,\n    loginAfterSignUp: loginAfterSignUp,\n    mustAcceptTerms: mustAcceptTerms,\n    showTerms: showTerms,\n    screens: screens,\n    signUpLink: signUpLink,\n    usernameStyle: usernameStyle,\n    signUpFieldsStrictValidation: signUpFieldsStrictValidation,\n    signUpHideUsernameField: signUpHideUsernameField\n  }).filter(function (x) {\n    return typeof x !== 'undefined';\n  }).toJS();\n}\nfunction processScreenOptions(opts) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    allowLogin: true,\n    allowSignUp: true,\n    allowForgotPassword: true,\n    initialScreen: undefined\n  };\n  var allowForgotPassword = opts.allowForgotPassword,\n    allowLogin = opts.allowLogin,\n    allowSignUp = opts.allowSignUp,\n    initialScreen = opts.initialScreen;\n  var screens = [];\n  if (allowLogin === true || !assertMaybeBoolean(opts, 'allowLogin') && defaults.allowLogin || allowLogin === undefined && defaults.allowLogin) {\n    screens.push('login');\n  }\n  if (allowSignUp === true || !assertMaybeBoolean(opts, 'allowSignUp') && defaults.allowSignUp || allowSignUp === undefined && defaults.allowSignUp) {\n    screens.push('signUp');\n  }\n  if (allowForgotPassword === true || !assertMaybeBoolean(opts, 'allowForgotPassword') && defaults.allowForgotPassword || allowForgotPassword === undefined && defaults.allowForgotPassword) {\n    screens.push('forgotPassword');\n  }\n  screens.push('mfaLogin');\n  if (!assertMaybeEnum(opts, 'initialScreen', screens)) {\n    initialScreen = undefined;\n  }\n  if (initialScreen === undefined) {\n    initialScreen = defaults.initialScreen || screens[0];\n  }\n  return {\n    initialScreen: initialScreen,\n    screens: new _immutable.List(screens)\n  };\n}\nfunction overrideDatabaseOptions(m, opts) {\n  var _processScreenOptions2 = processScreenOptions(opts, {\n      allowLogin: availableScreens(m).contains('login'),\n      allowSignUp: availableScreens(m).contains('signUp'),\n      allowForgotPassword: availableScreens(m).contains('forgotPassword'),\n      initialScreen: get(m, 'initialScreen')\n    }),\n    initialScreen = _processScreenOptions2.initialScreen,\n    screens = _processScreenOptions2.screens;\n  m = tset(m, 'initialScreen', initialScreen);\n  m = tset(m, 'screens', screens);\n  return m;\n}\nfunction defaultDatabaseConnection(m) {\n  var name = defaultDatabaseConnectionName(m);\n  return name && l.findConnection(m, name);\n}\nfunction defaultDatabaseConnectionName(m) {\n  return get(m, 'defaultConnectionName');\n}\nfunction databaseConnection(m) {\n  return l.resolvedConnection(m) || (0, _tenant.defaultDirectory)(m) || defaultDatabaseConnection(m) || l.connection(m, 'database');\n}\nfunction databaseConnectionName(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('name');\n}\nfunction forgotPasswordLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'forgotPasswordLink', notFound);\n}\nfunction signUpLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'signUpLink', notFound);\n}\nfunction setScreen(m, name) {\n  var fields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  // TODO: the lock/index module should provide a way to clear\n  // everything that needs the be cleared when changing screens, other\n  // modules should not care.\n  m = l.clearGlobalError(m);\n  m = l.clearGlobalSuccess(m);\n  m = (0, _index2.hideInvalidFields)(m, fields);\n  m = (0, _index2.clearFields)(m, fields);\n  return tset(m, 'screen', name);\n}\nfunction getScreen(m) {\n  var screen = tget(m, 'screen');\n  var initialScreen = getInitialScreen(m);\n  var screens = [screen, initialScreen, 'login', 'signUp', 'forgotPassword', 'mfaLogin'];\n  var availableScreens = screens.filter(function (x) {\n    return hasScreen(m, x);\n  });\n  return availableScreens[0];\n}\nfunction availableScreens(m) {\n  return tget(m, 'screens') || get(m, 'screens', new _immutable.List());\n}\nfunction getInitialScreen(m) {\n  return tget(m, 'initialScreen') || get(m, 'initialScreen');\n}\nfunction hasInitialScreen(m, str) {\n  return getInitialScreen(m) === str;\n}\nfunction databaseConnectionRequiresUsername(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).toJS().requireUsername;\n}\nfunction databaseUsernameStyle(m) {\n  if (l.hasSomeConnections(m, 'database')) {\n    if (l.connectionResolver(m)) {\n      return 'username';\n    }\n    return databaseConnectionRequiresUsername(m) ? get(m, 'usernameStyle', 'any') : 'email';\n  }\n  return l.hasSomeConnections(m, 'enterprise') && (0, _enterprise.findADConnectionWithoutDomain)(m) ? 'username' : 'email';\n}\nfunction databaseLogInWithEmail(m) {\n  return databaseUsernameStyle(m) === 'email';\n}\nfunction databaseUsernameValue(m) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isEmailOnly = databaseLogInWithEmail(m);\n  if (isEmailOnly) {\n    return (0, _index2.getFieldValue)(m, 'email');\n  }\n  if (options.emailFirst) {\n    return (0, _index2.getFieldValue)(m, 'email') || (0, _index2.getFieldValue)(m, 'username');\n  }\n  return (0, _index2.getFieldValue)(m, 'username') || (0, _index2.getFieldValue)(m, 'email');\n}\nfunction authWithUsername(m) {\n  return databaseConnectionRequiresUsername(m) || get(m, 'usernameStyle', 'email') === 'username';\n}\nfunction hasScreen(m, s) {\n  var _toJS = (databaseConnection(m) || (0, _immutable.Map)()).toJS(),\n    allowForgot = _toJS.allowForgot,\n    allowSignup = _toJS.allowSignup;\n  return !(allowForgot === false && s === 'forgotPassword') && !(allowSignup === false && s === 'signUp') && availableScreens(m).contains(s);\n}\nfunction shouldAutoLogin(m) {\n  return get(m, 'loginAfterSignUp');\n}\nfunction passwordStrengthPolicy(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('passwordPolicy', 'none');\n}\nfunction additionalSignUpFields(m) {\n  return get(m, 'additionalSignUpFields', (0, _immutable.List)());\n}\nfunction showTerms(m) {\n  return get(m, 'showTerms', true);\n}\nfunction signUpFieldsStrictValidation(m) {\n  return get(m, 'signUpFieldsStrictValidation', false);\n}\nfunction signUpHideUsernameField(m) {\n  return get(m, 'signUpHideUsernameField', false);\n}\nfunction mustAcceptTerms(m) {\n  return get(m, 'mustAcceptTerms', false);\n}\nfunction termsAccepted(m) {\n  return !mustAcceptTerms(m) || tget(m, 'termsAccepted', false);\n}\nfunction toggleTermsAcceptance(m) {\n  return tset(m, 'termsAccepted', !termsAccepted(m));\n}\nfunction resolveAdditionalSignUpFields(m) {\n  return additionalSignUpFields(m).reduce(function (r, x) {\n    switch (x.get('type')) {\n      case 'select':\n        return resolveAdditionalSignUpSelectField(r, x);\n      case 'hidden':\n        return resolveAdditionalSignUpHiddenField(r, x);\n      default:\n        return resolveAdditionalSignUpTextField(r, x);\n    }\n  }, m);\n}\nfunction resolveAdditionalSignUpSelectField(m, x) {\n  var name = x.get('name');\n  var keyNs = ['additionalSignUpField', name];\n  var prefill = x.get('prefill');\n  var options = x.get('options');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  var resolvedOptions = typeof options === 'function' ? undefined : options;\n  var register = function register(m) {\n    return resolvedPrefill !== undefined && resolvedOptions !== undefined ? (0, _index2.registerOptionField)(m, name, _immutable.default.fromJS(resolvedOptions), resolvedPrefill) : m;\n  };\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync.default)(m, keyNs.concat('prefill'), {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        resolvedPrefill = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  }\n  if (resolvedOptions === undefined) {\n    m = (0, _sync.default)(m, keyNs.concat('options'), {\n      successFn: function successFn(m, result) {\n        resolvedOptions = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return options(cb);\n      }\n    });\n  }\n  if (resolvedPrefill !== undefined && resolvedOptions !== undefined) {\n    m = (0, _index2.registerOptionField)(m, name, _immutable.default.fromJS(resolvedOptions), resolvedPrefill);\n  }\n  return m;\n}\nfunction resolveAdditionalSignUpTextField(m, x) {\n  var name = x.get('name');\n  var key = ['additionalSignUpField', name, 'prefill'];\n  var prefill = x.get('prefill');\n  var validator = x.get('validator');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync.default)(m, key, {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        return (0, _index2.setField)(m, name, result, validator);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  } else {\n    m = (0, _index2.setField)(m, name, resolvedPrefill, validator);\n  }\n  return m;\n}\nfunction resolveAdditionalSignUpHiddenField(m, x) {\n  return (0, _index2.setField)(m, x.get('name'), x.get('value'));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}