{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.go = exports.default = void 0;\nexports.hasError = hasError;\nexports.isDone = isDone;\nexports.isSuccess = isSuccess;\nvar _immutable = require(\"immutable\");\nvar _data_utils = require(\"./utils/data_utils\");\nvar l = _interopRequireWildcard(require(\"./core/index\"));\nvar _index2 = require(\"./store/index\");\nfunction _getRequireWildcardCache(e) {\n  if (\"function\" != typeof WeakMap) return null;\n  var r = new WeakMap(),\n    t = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n    return e ? t : r;\n  })(e);\n}\nfunction _interopRequireWildcard(e, r) {\n  if (!r && e && e.__esModule) return e;\n  if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return {\n    default: e\n  };\n  var t = _getRequireWildcardCache(r);\n  if (t && t.has(e)) return t.get(e);\n  var n = {\n      __proto__: null\n    },\n    a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) {\n    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n  }\n  return n.default = e, t && t.set(e, n), n;\n}\nvar _dataFns = (0, _data_utils.dataFns)(['sync']),\n  get = _dataFns.get,\n  set = _dataFns.set;\nvar _default = exports.default = function _default(m, key, opts) {\n  if (get(m, key) !== undefined) return m;\n  var status = opts.waitFn ? 'waiting' : !opts.conditionFn || opts.conditionFn(m) ? 'pending' : 'no';\n  return set(m, key, (0, _immutable.Map)({\n    conditionFn: opts.conditionFn,\n    errorFn: opts.errorFn,\n    recoverResult: opts.recoverResult,\n    syncStatus: status,\n    successFn: opts.successFn,\n    syncFn: opts.syncFn,\n    timeout: opts.timeout || 6000,\n    waitFn: opts.waitFn\n  }));\n};\nvar syncStatusKey = function syncStatusKey(key) {\n  return (window.Array.isArray(key) ? key : [key]).concat(['syncStatus']);\n};\nvar getStatus = function getStatus(m, key) {\n  return get(m, syncStatusKey(key));\n};\nvar setStatus = function setStatus(m, key, str) {\n  return set(m, syncStatusKey(key), str);\n};\nvar getProp = function getProp(m, key, name) {\n  return get(m, key).get(name);\n};\nvar findKeys = function findKeys(m) {\n  return m.reduce(function (r, v, k) {\n    var current = _immutable.Map.isMap(v) && v.has('syncStatus') ? [k] : [];\n    var nested = _immutable.Map.isMap(v) ? findKeys(v).map(function (x) {\n      return [k].concat(x);\n    }) : [];\n    return r.concat.apply(r, [current].concat([nested]));\n  }, []);\n};\nfunction removeKeys(m, keys) {\n  return keys.reduce(function (r, k) {\n    return r.deleteIn(syncStatusKey(k));\n  }, m);\n}\nvar process = function process(m, id) {\n  var keys = findKeys(get(m, [], (0, _immutable.Map)()));\n  // TODO timeout\n  return keys.reduce(function (r, k) {\n    if (typeof getProp(r, k, 'syncFn') != 'function') return r;\n    if (getStatus(r, k) === 'pending') {\n      r = setStatus(r, k, 'loading');\n      var called = false;\n      getProp(r, k, 'syncFn')(r, function (error, result) {\n        if (called) return;\n        called = true;\n        setTimeout(function () {\n          (0, _index2.swap)(_index2.updateEntity, 'lock', id, function (m) {\n            var errorFn = getProp(r, k, 'errorFn');\n            if (error && typeof errorFn === 'function') {\n              setTimeout(function () {\n                return errorFn(m, error);\n              }, 0);\n            }\n            var recoverResult = getProp(m, k, 'recoverResult');\n            if (error && recoverResult === undefined) {\n              return handleError(m, k, error);\n            } else {\n              m = setStatus(m, k, 'ok');\n              return getProp(m, k, 'successFn')(m, error ? recoverResult : result);\n            }\n          });\n        }, 0);\n      });\n    } else if (getStatus(r, k) === 'waiting') {\n      if (getProp(r, k, 'waitFn')(r)) {\n        var conditionFn = getProp(r, k, 'conditionFn');\n        r = setStatus(r, k, !conditionFn || conditionFn(r) ? 'pending' : 'no');\n      }\n    }\n    return r;\n  }, m);\n};\nvar go = exports.go = function go(id) {\n  (0, _index2.observe)('sync', id, function (m) {\n    setTimeout(function () {\n      return (0, _index2.swap)(_index2.updateEntity, 'lock', id, process, id);\n    }, 0);\n  });\n};\nfunction isSuccess(m, key) {\n  return getStatus(m, key) === 'ok';\n}\nfunction isDone(m) {\n  var keys = findKeys(get(m, [], (0, _immutable.Map)()));\n  return keys.length > 0 && keys.reduce(function (r, k) {\n    return r && !isLoading(m, k);\n  }, true);\n}\nfunction hasError(m) {\n  var excludeKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var keys = findKeys(removeKeys(get(m, [], (0, _immutable.Map)()), excludeKeys));\n  return keys.length > 0 && keys.reduce(function (r, k) {\n    return r || getStatus(m, k) === 'error';\n  }, false);\n}\nfunction isLoading(m, key) {\n  return ['loading', 'pending', 'waiting'].indexOf(getStatus(m, key)) > -1;\n}\nfunction handleError(m, key, error) {\n  var result = setStatus(m, key, 'error');\n\n  // TODO: this should be configurable for each sync\n  if (key !== 'sso') {\n    var stopError = new Error(\"An error occurred when fetching \".concat(key, \" data for Lock: \").concat(error.message));\n    stopError.code = 'sync';\n    stopError.origin = error;\n    result = l.stop(result, stopError);\n  }\n  return result;\n}","map":{"version":3,"names":["_typeof","o","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","go","default","hasError","isDone","isSuccess","_immutable","require","_data_utils","l","_interopRequireWildcard","_index2","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_dataFns","dataFns","_default","m","key","opts","undefined","status","waitFn","conditionFn","Map","errorFn","recoverResult","syncStatus","successFn","syncFn","timeout","syncStatusKey","window","Array","isArray","concat","getStatus","setStatus","str","getProp","name","findKeys","reduce","v","k","current","isMap","nested","map","x","apply","removeKeys","keys","deleteIn","process","id","called","error","result","setTimeout","swap","updateEntity","handleError","observe","length","isLoading","excludeKeys","arguments","indexOf","stopError","Error","message","code","origin","stop"],"sources":["/Users/sunguannan/VisualStudioProjects/authdemo/node_modules/auth0-lock/lib/sync.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.go = exports.default = void 0;\nexports.hasError = hasError;\nexports.isDone = isDone;\nexports.isSuccess = isSuccess;\nvar _immutable = require(\"immutable\");\nvar _data_utils = require(\"./utils/data_utils\");\nvar l = _interopRequireWildcard(require(\"./core/index\"));\nvar _index2 = require(\"./store/index\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nvar _dataFns = (0, _data_utils.dataFns)(['sync']),\n  get = _dataFns.get,\n  set = _dataFns.set;\nvar _default = exports.default = function _default(m, key, opts) {\n  if (get(m, key) !== undefined) return m;\n  var status = opts.waitFn ? 'waiting' : !opts.conditionFn || opts.conditionFn(m) ? 'pending' : 'no';\n  return set(m, key, (0, _immutable.Map)({\n    conditionFn: opts.conditionFn,\n    errorFn: opts.errorFn,\n    recoverResult: opts.recoverResult,\n    syncStatus: status,\n    successFn: opts.successFn,\n    syncFn: opts.syncFn,\n    timeout: opts.timeout || 6000,\n    waitFn: opts.waitFn\n  }));\n};\nvar syncStatusKey = function syncStatusKey(key) {\n  return (window.Array.isArray(key) ? key : [key]).concat(['syncStatus']);\n};\nvar getStatus = function getStatus(m, key) {\n  return get(m, syncStatusKey(key));\n};\nvar setStatus = function setStatus(m, key, str) {\n  return set(m, syncStatusKey(key), str);\n};\nvar getProp = function getProp(m, key, name) {\n  return get(m, key).get(name);\n};\nvar findKeys = function findKeys(m) {\n  return m.reduce(function (r, v, k) {\n    var current = _immutable.Map.isMap(v) && v.has('syncStatus') ? [k] : [];\n    var nested = _immutable.Map.isMap(v) ? findKeys(v).map(function (x) {\n      return [k].concat(x);\n    }) : [];\n    return r.concat.apply(r, [current].concat([nested]));\n  }, []);\n};\nfunction removeKeys(m, keys) {\n  return keys.reduce(function (r, k) {\n    return r.deleteIn(syncStatusKey(k));\n  }, m);\n}\nvar process = function process(m, id) {\n  var keys = findKeys(get(m, [], (0, _immutable.Map)()));\n  // TODO timeout\n  return keys.reduce(function (r, k) {\n    if (typeof getProp(r, k, 'syncFn') != 'function') return r;\n    if (getStatus(r, k) === 'pending') {\n      r = setStatus(r, k, 'loading');\n      var called = false;\n      getProp(r, k, 'syncFn')(r, function (error, result) {\n        if (called) return;\n        called = true;\n        setTimeout(function () {\n          (0, _index2.swap)(_index2.updateEntity, 'lock', id, function (m) {\n            var errorFn = getProp(r, k, 'errorFn');\n            if (error && typeof errorFn === 'function') {\n              setTimeout(function () {\n                return errorFn(m, error);\n              }, 0);\n            }\n            var recoverResult = getProp(m, k, 'recoverResult');\n            if (error && recoverResult === undefined) {\n              return handleError(m, k, error);\n            } else {\n              m = setStatus(m, k, 'ok');\n              return getProp(m, k, 'successFn')(m, error ? recoverResult : result);\n            }\n          });\n        }, 0);\n      });\n    } else if (getStatus(r, k) === 'waiting') {\n      if (getProp(r, k, 'waitFn')(r)) {\n        var conditionFn = getProp(r, k, 'conditionFn');\n        r = setStatus(r, k, !conditionFn || conditionFn(r) ? 'pending' : 'no');\n      }\n    }\n    return r;\n  }, m);\n};\nvar go = exports.go = function go(id) {\n  (0, _index2.observe)('sync', id, function (m) {\n    setTimeout(function () {\n      return (0, _index2.swap)(_index2.updateEntity, 'lock', id, process, id);\n    }, 0);\n  });\n};\nfunction isSuccess(m, key) {\n  return getStatus(m, key) === 'ok';\n}\nfunction isDone(m) {\n  var keys = findKeys(get(m, [], (0, _immutable.Map)()));\n  return keys.length > 0 && keys.reduce(function (r, k) {\n    return r && !isLoading(m, k);\n  }, true);\n}\nfunction hasError(m) {\n  var excludeKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var keys = findKeys(removeKeys(get(m, [], (0, _immutable.Map)()), excludeKeys));\n  return keys.length > 0 && keys.reduce(function (r, k) {\n    return r || getStatus(m, k) === 'error';\n  }, false);\n}\nfunction isLoading(m, key) {\n  return ['loading', 'pending', 'waiting'].indexOf(getStatus(m, key)) > -1;\n}\nfunction handleError(m, key, error) {\n  var result = setStatus(m, key, 'error');\n\n  // TODO: this should be configurable for each sync\n  if (key !== 'sso') {\n    var stopError = new Error(\"An error occurred when fetching \".concat(key, \" data for Lock: \").concat(error.message));\n    stopError.code = 'sync';\n    stopError.origin = error;\n    result = l.stop(result, stopError);\n  }\n  return result;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}