{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCollection = getCollection;\nexports.getEntity = getEntity;\nexports.getState = getState;\nexports.observe = observe;\nexports.read = read;\nexports.removeEntity = removeEntity;\nexports.setEntity = setEntity;\nexports.subscribe = subscribe;\nexports.swap = swap;\nexports.unsubscribe = unsubscribe;\nexports.updateCollection = updateCollection;\nexports.updateEntity = updateEntity;\nvar _atom = _interopRequireDefault(require(\"../utils/atom\"));\nvar _immutable = require(\"immutable\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar store = (0, _atom.default)(new _immutable.Map({}));\nfunction observe(key, id, f) {\n  subscribe(\"\".concat(key, \"-\").concat(id), function (_, oldState, newState) {\n    var m = getEntity(newState, 'lock', id);\n    var oldM = getEntity(oldState, 'lock', id);\n    if (m && !m.equals(oldM)) {\n      f(m);\n    }\n  });\n}\nfunction subscribe(key, f) {\n  store.addWatch(key, f);\n}\nfunction unsubscribe(key) {\n  store.removeWatch(key);\n}\nfunction swap() {\n  return store.swap.apply(store, arguments);\n}\nfunction updateEntity(state, coll, id, f) {\n  for (var _len = arguments.length, args = new Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n    args[_key - 4] = arguments[_key];\n  }\n  return state.updateIn([coll, id], new _immutable.Map({}), function (x) {\n    return f.apply(void 0, [x].concat(args));\n  });\n}\nfunction setEntity(state, coll, id, m) {\n  return state.setIn([coll, id], m);\n}\nfunction read(f) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  return f.apply(void 0, [store.deref()].concat(args));\n}\nfunction getEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return state.getIn([coll, id]);\n}\nfunction removeEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return state.removeIn([coll, id]);\n}\nfunction getCollection(state, coll) {\n  return state.get(coll, (0, _immutable.Map)()).toList();\n}\n\n// TODO: try to remove this fn\nfunction updateCollection(state, coll, f) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 3 ? _len3 - 3 : 0), _key3 = 3; _key3 < _len3; _key3++) {\n    args[_key3 - 3] = arguments[_key3];\n  }\n  return state.update(coll, function (xs) {\n    return f.apply(void 0, [xs].concat(args));\n  });\n}\nfunction getState() {\n  return store.deref();\n}\n\n// DEV\n// store.addWatch(\"keepHistory\", (key, oldState, newState) => {\n//   if (!window.h) window.h = []; window.h.push(newState);\n//   console.debug(\"something changed\", newState.toJS());\n// });","map":{"version":3,"names":["Object","defineProperty","exports","value","getCollection","getEntity","getState","observe","read","removeEntity","setEntity","subscribe","swap","unsubscribe","updateCollection","updateEntity","_atom","_interopRequireDefault","require","_immutable","obj","__esModule","default","store","Map","key","id","f","concat","_","oldState","newState","m","oldM","equals","addWatch","removeWatch","apply","arguments","state","coll","_len","length","args","Array","_key","updateIn","x","setIn","_len2","_key2","deref","undefined","getIn","removeIn","get","toList","_len3","_key3","update","xs"],"sources":["/Users/sunguannan/VisualStudioProjects/authdemo/node_modules/auth0-lock/lib/store/index.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCollection = getCollection;\nexports.getEntity = getEntity;\nexports.getState = getState;\nexports.observe = observe;\nexports.read = read;\nexports.removeEntity = removeEntity;\nexports.setEntity = setEntity;\nexports.subscribe = subscribe;\nexports.swap = swap;\nexports.unsubscribe = unsubscribe;\nexports.updateCollection = updateCollection;\nexports.updateEntity = updateEntity;\nvar _atom = _interopRequireDefault(require(\"../utils/atom\"));\nvar _immutable = require(\"immutable\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar store = (0, _atom.default)(new _immutable.Map({}));\nfunction observe(key, id, f) {\n  subscribe(\"\".concat(key, \"-\").concat(id), function (_, oldState, newState) {\n    var m = getEntity(newState, 'lock', id);\n    var oldM = getEntity(oldState, 'lock', id);\n    if (m && !m.equals(oldM)) {\n      f(m);\n    }\n  });\n}\nfunction subscribe(key, f) {\n  store.addWatch(key, f);\n}\nfunction unsubscribe(key) {\n  store.removeWatch(key);\n}\nfunction swap() {\n  return store.swap.apply(store, arguments);\n}\nfunction updateEntity(state, coll, id, f) {\n  for (var _len = arguments.length, args = new Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n    args[_key - 4] = arguments[_key];\n  }\n  return state.updateIn([coll, id], new _immutable.Map({}), function (x) {\n    return f.apply(void 0, [x].concat(args));\n  });\n}\nfunction setEntity(state, coll, id, m) {\n  return state.setIn([coll, id], m);\n}\nfunction read(f) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  return f.apply(void 0, [store.deref()].concat(args));\n}\nfunction getEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return state.getIn([coll, id]);\n}\nfunction removeEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return state.removeIn([coll, id]);\n}\nfunction getCollection(state, coll) {\n  return state.get(coll, (0, _immutable.Map)()).toList();\n}\n\n// TODO: try to remove this fn\nfunction updateCollection(state, coll, f) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 3 ? _len3 - 3 : 0), _key3 = 3; _key3 < _len3; _key3++) {\n    args[_key3 - 3] = arguments[_key3];\n  }\n  return state.update(coll, function (xs) {\n    return f.apply(void 0, [xs].concat(args));\n  });\n}\nfunction getState() {\n  return store.deref();\n}\n\n// DEV\n// store.addWatch(\"keepHistory\", (key, oldState, newState) => {\n//   if (!window.h) window.h = []; window.h.push(newState);\n//   console.debug(\"something changed\", newState.toJS());\n// });\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}